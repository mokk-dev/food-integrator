==========================================
  Cardapioweb Integrator - Test Suite v15
==========================================
Categoria: all

[0;34m[INFO][0m === CATEGORIA 1: INFRAESTRUTURA ===

[0;34m[INFO][0m Testando: 1.1.1 - Containers est√£o rodando
[0;32m[PASS][0m 1.1.1 - Containers est√£o rodando

[0;34m[INFO][0m Testando: 1.1.2 - DB container existe
[0;32m[PASS][0m 1.1.2 - DB container existe

[0;34m[INFO][0m Testando: 1.1.3 - Redis container existe
[0;32m[PASS][0m 1.1.3 - Redis container existe

[0;34m[INFO][0m Testando: 1.1.4 - App container existe
[0;32m[PASS][0m 1.1.4 - App container existe

[0;34m[INFO][0m Testando: 1.1.5 - DB est√° respondendo
[0;32m[PASS][0m 1.1.5 - DB est√° respondendo

[0;34m[INFO][0m Testando: 1.1.6 - Redis est√° respondendo
[0;32m[PASS][0m 1.1.6 - Redis est√° respondendo

[0;34m[INFO][0m Testando: 1.1.7 - App est√° rodando
[0;32m[PASS][0m 1.1.7 - App est√° rodando

[0;34m[INFO][0m Testando: 1.1.8 - Porta DB n√£o exposta externamente (security)
[0;32m[PASS][0m 1.1.8 - Porta DB n√£o exposta externamente (security)

[0;34m[INFO][0m Testando: 1.1.9 - Volume Postgres existe
[0;32m[PASS][0m 1.1.9 - Volume Postgres existe

[0;34m[INFO][0m Testando: 1.1.10 - Volume Redis existe
[0;32m[PASS][0m 1.1.10 - Volume Redis existe

[0;34m[INFO][0m Testando: 1.2.1 - App responde na porta 8000
[0;32m[PASS][0m 1.2.1 - App responde na porta 8000
[0;34m[INFO][0m === CATEGORIA 2: BANCO DE DADOS ===

[0;34m[INFO][0m Testando: 2.1.1 - Conex√£o PostgreSQL funciona
[0;32m[PASS][0m 2.1.1 - Conex√£o PostgreSQL funciona

[0;34m[INFO][0m Testando: 2.1.2 - Extens√£o TimescaleDB instalada
[0;32m[PASS][0m 2.1.2 - Extens√£o TimescaleDB instalada

[0;34m[INFO][0m Testando: 2.1.3 - Timezone configurado (America/Sao_Paulo)
[0;32m[PASS][0m 2.1.3 - Timezone configurado (America/Sao_Paulo)

[0;34m[INFO][0m Testando: 2.2.1 - Tabela merchants existe e acess√≠vel
[0;32m[PASS][0m 2.2.1 - Tabela merchants existe e acess√≠vel

[0;34m[INFO][0m Testando: 2.2.2 - Tabela operation_days existe
[0;32m[PASS][0m 2.2.2 - Tabela operation_days existe

[0;34m[INFO][0m Testando: 2.2.3 - Tabela webhook_inbox existe
[0;32m[PASS][0m 2.2.3 - Tabela webhook_inbox existe

[0;34m[INFO][0m Testando: 2.2.4 - Tabela orders existe
[0;32m[PASS][0m 2.2.4 - Tabela orders existe

[0;34m[INFO][0m Testando: 2.2.5 - Tabela order_events existe
[0;32m[PASS][0m 2.2.5 - Tabela order_events existe

[0;34m[INFO][0m Testando: 2.2.6 - Tabela operation_snapshots existe
[0;32m[PASS][0m 2.2.6 - Tabela operation_snapshots existe

[0;34m[INFO][0m Testando: 2.3.1 - 3 Hypertables existem (TimescaleDB)
[0;32m[PASS][0m 2.3.1 - 3 Hypertables existem (TimescaleDB)

[0;34m[INFO][0m Testando: 2.4.1 - operation_days.id √© BIGSERIAL/INTEGER
[0;32m[PASS][0m 2.4.1 - operation_days.id √© BIGSERIAL/INTEGER

[0;34m[INFO][0m Testando: 2.4.2 - orders.operation_day_id √© INTEGER
[0;32m[PASS][0m 2.4.2 - orders.operation_day_id √© INTEGER
[0;34m[INFO][0m === CATEGORIA 3: DADOS E SEED ===

[0;34m[INFO][0m Testando: 3.1.1 - Merchant Caramelo (6758) existe
[0;32m[PASS][0m 3.1.1 - Merchant Caramelo (6758) existe

[0;34m[INFO][0m Testando: 3.1.2 - Dados do merchant completos
[0;32m[PASS][0m 3.1.2 - Dados do merchant completos

[0;34m[INFO][0m Testando: 3.1.3 - Threshold near = 2.0 km
[0;32m[PASS][0m 3.1.3 - Threshold near = 2.0 km

[0;34m[INFO][0m Testando: 3.1.4 - Threshold medium = 5.0 km
[0;32m[PASS][0m 3.1.4 - Threshold medium = 5.0 km

[0;34m[INFO][0m Testando: 3.1.5 - Capacidade padr√£o = 4 entregadores
[0;32m[PASS][0m 3.1.5 - Capacidade padr√£o = 4 entregadores
[0;34m[INFO][0m === CATEGORIA 4: FUN√á√ïES SQL ===

[0;34m[INFO][0m Testando: 4.1.1 - Fun√ß√£o get_open_operation_day existe
[0;32m[PASS][0m 4.1.1 - Fun√ß√£o get_open_operation_day existe

[0;34m[INFO][0m Testando: 4.1.2 - Fun√ß√£o update_updated_at_column existe
[0;32m[PASS][0m 4.1.2 - Fun√ß√£o update_updated_at_column existe

[0;34m[INFO][0m Testando: 4.1.3 - Fun√ß√£o retry_failed_event existe
[0;32m[PASS][0m 4.1.3 - Fun√ß√£o retry_failed_event existe

[0;34m[INFO][0m Testando: 4.1.4 - Fun√ß√£o get_order_timeline existe
[0;32m[PASS][0m 4.1.4 - Fun√ß√£o get_order_timeline existe
[0;34m[INFO][0m === CATEGORIA 5: OPERA√á√ïES CRUD ===

[0;34m[INFO][0m Testando: 5.2.1 - Inserir webhook inbox
[0;32m[PASS][0m 5.2.1 - Inserir webhook inbox

[0;34m[INFO][0m Testando: 5.2.2 - Consultar webhook por event_id
[0;32m[PASS][0m 5.2.2 - Consultar webhook por event_id

[0;34m[INFO][0m Testando: 5.2.3 - Deduplica√ß√£o por PK: inserir duplicado deve falhar
[0;32m[PASS][0m 5.2.3 - Deduplica√ß√£o por PK: inserir duplicado deve falhar
[0;34m[INFO][0m Criando operation_day de teste...
[0;34m[INFO][0m Resultado bruto:  id 
----
  2
[0;34m[INFO][0m Operation_day ID obtido: '2'

[0;34m[INFO][0m Testando: 5.3.1 - Inserir order com operation_day_id v√°lido
[0;32m[PASS][0m 5.3.1 - Inserir order com operation_day_id v√°lido

[0;34m[INFO][0m Testando: 5.3.2 - Consultar order com JOIN em merchants
[0;32m[PASS][0m 5.3.2 - Consultar order com JOIN em merchants

[0;34m[INFO][0m Testando: 5.3.3 - Atualizar status do order
[0;32m[PASS][0m 5.3.3 - Atualizar status do order
[0;34m[INFO][0m Limpando dados de teste...
[0;34m[INFO][0m === CATEGORIA 6: VIEW MATERIALIZADA ===

[0;34m[INFO][0m Testando: 6.1.1 - View shift_summary existe
[0;32m[PASS][0m 6.1.1 - View shift_summary existe

[0;34m[INFO][0m Testando: 6.1.2 - Refresh materialized view funciona
[0;32m[PASS][0m 6.1.2 - Refresh materialized view funciona

[0;34m[INFO][0m Testando: 6.1.3 - Consultar shift_summary (pode estar vazia inicialmente)
[0;32m[PASS][0m 6.1.3 - Consultar shift_summary (pode estar vazia inicialmente)
[0;34m[INFO][0m === CATEGORIA 7: API HTTP ===

[0;34m[INFO][0m Testando: 7.1.1 - Health endpoint responde 200
[0;32m[PASS][0m 7.1.1 - Health endpoint responde 200

[0;34m[INFO][0m Testando: 7.1.2 - Health retorna JSON correto
[0;32m[PASS][0m 7.1.2 - Health retorna JSON correto

[0;34m[INFO][0m Testando: 7.1.3 - Readiness endpoint responde 200
[0;32m[PASS][0m 7.1.3 - Readiness endpoint responde 200

[0;34m[INFO][0m Testando: 7.1.4 - Readiness verifica database e redis
[0;32m[PASS][0m 7.1.4 - Readiness verifica database e redis

[0;34m[INFO][0m Testando: 7.2.1 - Correlation ID √© propagado
[0;32m[PASS][0m 7.2.1 - Correlation ID √© propagado

[0;34m[INFO][0m Testando: 7.2.2 - Security headers presentes
[0;32m[PASS][0m 7.2.2 - Security headers presentes

[0;34m[INFO][0m Testando: 7.3.1 - 404 retorna erro estruturado
[0;32m[PASS][0m 7.3.1 - 404 retorna erro estruturado
[0;34m[INFO][0m === CATEGORIA 8: REDIS ===

[0;34m[INFO][0m Testando: 8.1.1 - Redis responde a PING
[0;32m[PASS][0m 8.1.1 - Redis responde a PING

[0;34m[INFO][0m Testando: 8.1.2 - Redis SET e GET funcionam
[0;32m[PASS][0m 8.1.2 - Redis SET e GET funcionam

[0;34m[INFO][0m Testando: 8.1.3 - Redis EXPIRE/TTL funcionam
[0;32m[PASS][0m 8.1.3 - Redis EXPIRE/TTL funcionam
[0;34m[INFO][0m === CATEGORIA 9: PERFORMANCE ===
[1;33m[WARN][0m apache2-utils n√£o instalado, pulando testes de carga

==========================================
           RELAT√ìRIO DE TESTES
==========================================
Total de testes:  51
[0;32mPassaram:        51[0m
[0;31mFalharam:        0[0m
Taxa de sucesso: 100%
==========================================
[0;32m‚úÖ TODOS OS TESTES PASSARAM![0m
